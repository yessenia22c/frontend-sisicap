<div class="container-fluid" >
  <div style="padding-bottom: 1em;">
    <h4 style="font-size: 20px; font-weight: 500; color: #002f8d; padding-top: 0.6rem;">Participantes</h4>
    <button *appControlRoles="3" style="margin-right: 8px;"  mat-raised-button color="primary" (click)="nuevoParticipante()"> Nuevo participante</button>
    <button mat-raised-button color="primary" (click)="asignarNuevoEmpleado()"  > Asignar a participante</button>
  </div>
  <mat-form-field *appControlRoles="nivelRequerido" style="width: 100%;">
    <mat-label>Buscar</mat-label>
    <input matInput (keyup)="applyFilter($event)" placeholder="Ej. Juan" #input>
  </mat-form-field>

  <section *appControlRoles="nivelRequerido"  class="example-container mat-elevation-z8" tabindex="0">
    <table mat-table [dataSource]="dataSource" matSort>

      <!-- ID Column -->
      <ng-container matColumnDef="id_participante">
        <th mat-header-cell *matHeaderCellDef> # </th>
        <td mat-cell *matCellDef="let item; let i = index">{{ i + 1 }}</td>
      </ng-container>

      <!-- Progress Column -->
      <ng-container matColumnDef="nombres_per" sticky>
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Nombre(s) </th>
        <td mat-cell *matCellDef="let item "> {{item.Personas.nombres_per}} </td>
      </ng-container>
      <ng-container matColumnDef="apellidos">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Apellido(s) </th>
        <td mat-cell *matCellDef="let item "> {{item.Personas.apellidos}} </td>
      </ng-container>
      <ng-container matColumnDef="nro_ci">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> C.I.</th>
        <td mat-cell *matCellDef="let item "> {{item.Personas.nro_ci}} </td>
      </ng-container>
      <ng-container matColumnDef="correo">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Email </th>
        <td mat-cell *matCellDef="let item "> {{item.Personas.correo}} </td>
      </ng-container>
      <ng-container matColumnDef="telefono">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Teléfono </th>
        <td mat-cell *matCellDef="let item "> {{item.Personas.telefono}} </td>
      </ng-container>
      <ng-container matColumnDef="ocupacion">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Ocupación</th>
        <td mat-cell *matCellDef="let item "> {{item.ocupacion}} </td>
      </ng-container>
      <ng-container matColumnDef="codigo_participante">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Código </th>
        <td mat-cell *matCellDef="let item "> {{item.codigo_participante}} </td>
      </ng-container>
      <ng-container matColumnDef="id_ciudad">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Ciudad </th>
        <td mat-cell *matCellDef="let item "> {{item.Personas.ciudad?.nombre_ciudad}} </td>
      </ng-container>
      <ng-container matColumnDef="id_usuario">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Registrante</th>
        <td mat-cell *matCellDef="let item "> {{item.usuario.nombre_usuario}} </td>
      </ng-container>



      <!-- Star Column -->
      <!-- <ng-container matColumnDef="accion" stickyEnd>
        <th mat-header-cell *matHeaderCellDef aria-label="row actions">&nbsp;</th>
        <td mat-cell *matCellDef="let element">
          <div class="example-button-container">
            <button mat-icon-button color="primary" aria-label="Boton editar" (click)="editarParticipante(element)">
              <mat-icon>edit</mat-icon>
            </button>
            <button mat-icon-button color="warn" aria-label="Boton eliminar"
              (click)="dialogoEliminarParticipante(element)">
              <mat-icon>delete</mat-icon>
            </button>

          </div>
        </td>
      </ng-container> -->
      <ng-template   [appMostrarColumn]="15" (accesoDeterminado)="agregaEditarBoton($event)">
          <ng-container matColumnDef="botonEditar">
              <th *matHeaderCellDef mat-header-cell aria-label="row actions">&nbsp;</th>      
              <td  mat-cell  *matCellDef="let element" class="example-button-container">
                  <button  mat-icon-button color="primary" aria-label="Boton editar" (click)="editarParticipante(element)">
                      <mat-icon>edit</mat-icon>
                  </button>
              </td> 
          </ng-container>
      </ng-template>
      
      <ng-template   [appMostrarColumn]="21" (accesoDeterminado)="agregaEliminarBoton($event)">
          <ng-container matColumnDef="botonEliminar" >
              <th *matHeaderCellDef mat-header-cell aria-label="row actions">&nbsp; </th>
              <td mat-cell *matCellDef="let element" class="example-button-container">
                  <button  mat-icon-button color="warn" aria-label="Boton eliminar" (click)="dialogoEliminarParticipante(element)">
                      <mat-icon>delete</mat-icon>
                  </button>
              </td>
          </ng-container>
      </ng-template>

      <tr mat-header-row *matHeaderRowDef="displayedColumns;"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>

  </section>
  <mat-paginator [pageSizeOptions]="[10, 20, 30, 100]" aria-label="Select page of users"></mat-paginator>
</div>


